<!-- django/core/templates/core/events.html -->
{% extends 'core/base.html' %}

{% block title %}Eventos{% endblock %}

{% block content %}
<div class="mt-6 px-6 py-6 bg-gray-100 rounded-xl">
    <h2 class="mb-6 text-4xl text-center font-semibold">Participação do Museu em Eventos</h2>

    {% for evento in events_list %}
    <div class="bg-white rounded-xl overflow-hidden shadow-sm mb-6 p-6">
        <div class="grid grid-cols-7 gap-6" style="padding: 2%;">
            {% if forloop.counter|divisibleby:2 %}
                <div class="col-span-4" style="padding: 2%;">
                    <h1 class="mb-6 text-6xl text-center">{{ evento.name }}</h1>
                    <p class="text-gray-500 text-2xl" style="margin-bottom: 10px;"><strong>Ano:</strong> {{ evento.year|default:"Desconhecido" }}</p>
                    <p class="text-gray-500 text-2xl" style="margin-bottom: 10px;"><strong>Atividade:</strong><br>{{ evento.activity|default:"Nenhuma atividade descrita" }}</p>
                </div>
                <div class="col-span-3">
                    {% if evento.events_pics.all %}
                        <div id="carouselEvent-{{ evento.id }}" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                                {% for image in evento.events_pics.all %}
                                    <button type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide-to="{{ forloop.counter0 }}"
                                    class="{% if forloop.first %}active{% endif %}" aria-current="{% if forloop.first %}true{% endif %}" aria-label="Slide {{ forloop.counter }}"></button>
                                {% endfor %}
                            </div>
                            <div class="carousel-inner rounded-xl">
                                {% for image in evento.events_pics.all %}
                                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                        <img src="{{ image.event_image.url }}" class="d-block w-full object-cover" style="height:auto;" alt="Imagem do evento {{ evento.name }}">
                                    </div>
                                {% empty %}
                                    <div class="carousel-item active">
                                        <div class="bg-gray-200 d-flex align-items-center justify-content-center" style="height: 500px">
                                            <span class="text-gray-500">Sem imagens disponíveis para este evento</span>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                            {% if evento.events_pics.count > 1 %}
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Anterior</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Próximo</span>
                                </button>
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="w-full h-64 bg-gray-200 flex items-center justify-content-center text-gray-400 rounded-lg mt-4">
                            Sem imagem registrada
                        </div>
                    {% endif %}
                </div>
            {% else %}
                <div class="col-span-3">
                    {% if evento.events_pics.all %}
                        <div id="carouselEvent-{{ evento.id }}" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                                {% for image in evento.events_pics.all %}
                                    <button type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide-to="{{ forloop.counter0 }}"
                                    class="{% if forloop.first %}active{% endif %}" aria-current="{% if forloop.first %}true{% endif %}" aria-label="Slide {{ forloop.counter }}"></button>
                                {% endfor %}
                            </div>
                            <div class="carousel-inner rounded-xl">
                                {% for image in evento.events_pics.all %}
                                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                        <img src="{{ image.event_image.url }}" class="d-block w-full object-cover" style="height:auto;" alt="Imagem do evento {{ evento.name }}">
                                    </div>
                                {% empty %}
                                    <div class="carousel-item active">
                                        <div class="bg-gray-200 d-flex align-items-center justify-content-center" style="height: 500px">
                                            <span class="text-gray-500">Sem imagens disponíveis para este evento</span>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                            {% if evento.events_pics.count > 1 %}
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Anterior</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselEvent-{{ evento.id }}" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Próximo</span>
                                </button>
                            {% endif %}
                        </div>
                    {% else %}
                        <div class="w-full h-64 bg-gray-200 flex items-center justify-content-center text-gray-400 rounded-lg mt-4">
                            Sem imagem registrada
                        </div>
                    {% endif %}
                </div>
                <div class="col-span-4" style="padding: 2%;">
                    <h1 class="mb-6 text-6xl text-center">{{ evento.name }}</h1>
                    <p class="text-gray-500 text-2xl" style="margin-bottom: 10px;"><strong>Ano:</strong> {{ evento.year|default:"Desconhecido" }}</p>
                    <p class="text-gray-500 text-2xl" style="margin-bottom: 10px;"><strong>Atividade:</strong><br>{{ evento.activity|default:"Nenhuma atividade descrita" }}</p>
                </div>
            {% endif %}
        </div>
    </div>
    {% empty %}
        <p class="text-center text-gray-500">Nenhum evento registrado ainda.</p>
    {% endfor %}
</div>
{% endblock %}
